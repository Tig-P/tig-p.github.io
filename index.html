<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>손익비 계산기 | 주식 리스크 관리</title>
    <meta name="description" content="진입가, 손절가, 목표가를 기반으로 정확한 손익비와 적정 매수 수량을 계산하여, 원칙있는 주식 투자를 돕는 리스크 관리 계산기입니다.">
    <meta name="keywords" content="주식 평단가, 평단가 계산기, 손익비, 손익비 계산기, 리스크 관리, 주식 투자, 포지션 사이징, 주식 계산기, 물타기 계산, 추가 매수, 트레이딩, 매매일지">

    <!-- Open Graph (카카오톡, 페이스북 등 공유) -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tig-p.github.io/">
    <meta property="og:title" content="손익비 계산기 | 주식 리스크 관리">
    <meta property="og:description" content="진입가, 손절가, 목표가를 기반으로 정확한 손익비와 적정 매수 수량을 계산하여, 원칙있는 주식 투자를 돕는 리스크 관리 계산기입니다.">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>주식 평단가 손익비 계산기</h1>
        <p class="description">매매 진입 전 손익비와 적정 매수 수량을 계산하여 원칙있는 투자를 돕습니다.</p>

        <div class="input-group">
            <label for="total-capital">총 투자금 (원)</label>
            <input type="number" id="total-capital" placeholder="예: 10,000,000">
        </div>

        <div class="input-group">
            <label>투자 비중 선택</label>
            <div id="leverage-buttons" class="leverage-buttons">
                <button class="leverage-btn" data-value="0.25">25%</button>
                <button class="leverage-btn" data-value="0.5">50%</button>
                <button class="leverage-btn" data-value="0.75">75%</button>
                <button class="leverage-btn" data-value="1">100%</button>
            </div>
            <div class="leverage-slider-container">
                <input type="range" id="leverage-slider" min="1" max="100" value="100">
                <span id="leverage-slider-value">100%</span>
            </div>
            <div class="investment-display">
                <strong>실제 투입금액:</strong>
                <span id="investment-amount">0</span> 원
            </div>
        </div>

        <div class="input-group">
            <label for="entry-price">진입 가격 (원)</label>
            <input type="number" id="entry-price" placeholder="매수하려는 가격">
        </div>
        <div class="input-group">
            <label for="risk-percent">감수할 손실률 (%)</label>
            <input type="number" id="risk-percent" placeholder="예: 2">
        </div>
        <div class="input-group">
            <label for="stop-loss-price">손절 가격 (원) <span class="auto-calc-label">(자동 계산)</span></label>
            <input type="number" id="stop-loss-price" placeholder="진입가와 손실률 입력 시 자동 계산">
        </div>

        <div class="input-group">
            <label for="rr-ratio-select">목표 손익비 선택</label>
            <select id="rr-ratio-select">
                <option value="custom">직접 입력</option>
                <option value="1">1 : 1</option>
                <option value="1.5">1.5 : 1</option>
                <option value="2">2 : 1 (권장)</option>
                <option value="3">3 : 1</option>
            </select>
        </div>

        <div class="input-group">
            <label for="take-profit-percent">목표 수익률 (%) <span class="auto-calc-label">(자동 계산)</span></label>
            <input type="number" id="take-profit-percent" placeholder="예: 4">
        </div>
        <div class="input-group">
            <label for="take-profit-price">목표 가격 (원) <span class="auto-calc-label">(자동 계산)</span></label>
            <input type="number" id="take-profit-price" placeholder="진입가와 수익률 입력 시 자동 계산">
        </div>

        <button id="calculate-btn">계산하기</button>

        <div id="result" class="hidden">
            <h2>계산 결과</h2>
            <p><strong>총 감수할 손실액:</strong> <span id="max-loss-amount"></span>원</p>
            <p><strong>주당 손실 가능 금액:</strong> <span id="loss-per-share"></span>원</p>
            <p><strong>적정 매수 수량:</strong> <span id="position-size"></span>주</p>
            <hr>
            <p><strong>예상 수익률:</strong> <span id="potential-gain-percent"></span>%</p>
            <p><strong>예상 손실률:</strong> <span id="potential-loss-percent"></span>%</p>
            <p class="highlight"><strong>손익비 (수익:손실):</strong> <span id="risk-reward-ratio"></span></p>
            <div id="trade-advice"></div>
            <p id="disclaimer" class="small-text" style="margin-top: 15px; text-align: center;"></p>
        </div>

        <!-- 통합된 추가 매수 및 목표 평단가 계산기 -->
        <div class="averaging-section">
            <h2>추가 매수 & 목표 평단가 계산</h2>
            <p class="description small-text">1차 매수 정보는 위 계산기의 '진입 가격'과 '적정 매수 수량'이 자동으로 사용됩니다. <br><strong>정방향 계산:</strong> 2,3차 정보를 입력하고 '평균가 계산' 클릭 <br><strong>역방향 계산:</strong> 비워둔 한 곳(평단, 가격, 수량)을 계산하려면 '필요정보 역계산' 클릭</p>
            
            <div class="input-group">
                <label for="target-avg-price">목표 / 결과 평균가 (원)</label>
                <input type="number" id="target-avg-price" placeholder="목표 평단 입력 또는 결과 확인">
            </div>

            <div class="avg-input-row">
                <div class="input-group">
                    <label for="avg-price-2">2차 매수 가격</label>
                    <input type="number" id="avg-price-2" placeholder="가격">
                </div>
                <div class="input-group">
                    <label for="avg-qty-2">2차 매수 수량</label>
                    <input type="number" id="avg-qty-2" placeholder="수량">
                </div>
            </div>

            <div class="avg-input-row">
                <div class="input-group">
                    <label for="avg-price-3">3차 매수 가격</label>
                    <input type="number" id="avg-price-3" placeholder="가격">
                </div>
                <div class="input-group">
                    <label for="avg-qty-3">3차 매수 수량</label>
                    <input type="number" id="avg-qty-3" placeholder="수량">
                </div>
            </div>

            <div class="button-group">
                <button id="calculate-avg-btn">평균가 계산</button>
                <button id="reverse-calculate-btn" class="secondary-btn">필요정보 역계산</button>
            </div>
             <button id="apply-avg-btn" class="tertiary-btn hidden">계산된 평균가를 위 계산기에 적용</button>
        </div>
        
        <div class="donation">
            <p>이 툴이 도움이 되셨다면 커피 한 잔 어떠신가요? ☕️</p>
            <p class="small-text">아래 QR코드를 스캔하여 카카오페이로 후원할 수 있습니다.</p>
            <img src="qrcode.png" alt="카카오페이 후원 QR코드" class="qr-code-img">
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>